(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{69:function(e,t,n){},77:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(41),s=n.n(r),i=n(88),o=n(44),l=n(14),u=n(7),j=n.n(u),d=n(6),h=(n(69),n(84)),b=n(85),O=n(86),p=n(1),m=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("header",{children:Object(p.jsx)("h1",{style:{color:"var(--accent)"},children:"AniMatch"})}),Object(p.jsx)("nav",{children:Object(p.jsxs)("div",{id:"nav-links",children:[Object(p.jsx)(l.b,{to:"/",exact:!0,activeClassName:"active",component:"a",className:"icon",children:Object(p.jsx)(h.a,{size:18})}),Object(p.jsx)(l.b,{to:"/search",activeClassName:"active",component:"a",className:"icon",children:Object(p.jsx)(b.a,{size:16})}),Object(p.jsx)(l.b,{to:"/profile",activeClassName:"active",component:"a",className:"icon",children:Object(p.jsx)(O.a,{size:18})})]})})]})},x=n(23),f=n(45),g=n(18),v=Object(c.createContext)({}),k=v,N=function(e){var t=e.children,n=localStorage.getItem("user"),a=Object(c.useState)(JSON.parse(n)),r=Object(g.a)(a,2),s=r[0],i=r[1];return Object(p.jsx)(v.Provider,{value:{user:s,setUser:i},children:t})},S=function(e){var t=e.component,n=Object(f.a)(e,["component"]),a=Object(c.useContext)(k).user;return Object(p.jsx)(d.b,Object(x.a)(Object(x.a)({},n),{},{render:function(e){return null!==a?Object(p.jsx)(t,Object(x.a)({},e)):Object(p.jsx)(d.a,{to:{pathname:"/login"}})}}))},C=n(87),w=n(28),y=n.n(w),_=function(){var e=Object(c.useContext)(k),t=e.user,n=e.setUser,a=function(e){var t=e.tokenId;j.a.post("/user/login",{token:t}).then((function(e){console.log(e.data.msg),localStorage.setItem("token",e.data.data.token),localStorage.setItem("user",JSON.stringify(e.data.data.user_info)),n(e.data.data.user_info)})).catch(console.error)};return null!==t?Object(p.jsx)(d.a,{to:"/"}):Object(p.jsx)("div",{id:"login",children:t?Object(p.jsx)(w.GoogleLogout,{clientId:"1020854869671-l7ou2icqal1f51mvmq4itdh9500c0ias.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(e){localStorage.removeItem("token")}}):Object(p.jsx)(y.a,{clientId:"1020854869671-l7ou2icqal1f51mvmq4itdh9500c0ias.apps.googleusercontent.com",buttonText:"Continue with Google",onSuccess:a,onFailure:a,cookiePolicy:"single_host_origin",isSignedIn:!0,render:function(e){return Object(p.jsxs)("button",{className:"outlined",onClick:e.onClick,disabled:e.disabled,children:[Object(p.jsx)(C.a,{})," \xa0 Continue with Google"]})}})})},I=n(16),q=n.n(I),F=n(22),L=(n(77),n(43)),E=n.n(L),P=n(89),T=j.a.create(),z=function(){var e,t=Object(P.a)("animeData",function(){var e=Object(F.a)(q.a.mark((function e(){var t,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={params:{q:"deathnote"}},e.next=3,T.get("https://api.jikan.moe/v3/search/anime",t).then((function(e){return e.data})).catch(console.error);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),n=t.data,c=(t.refetch,function(e,t){"right"===e?function(e){j.a.post("/watch_later/add",{mal_id:e}).then((function(e){return console.log(e)})).catch(console.error)}(t):"up"===e&&function(e){j.a.post("/completed/add",{mal_id:e}).then((function(e){return console.log(e)})).catch(console.error)}(t)});return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"swiping-area",children:null===n||void 0===n||null===(e=n.results)||void 0===e?void 0:e.map((function(e){var t;return Object(p.jsx)(E.a,{className:"tinder-card",onSwipe:function(t){return c(t,e.mal_id)},onCardLeftScreen:function(){return t=e.mal_id,void console.log(t+" left the screen");var t},preventSwipe:["down"],children:Object(p.jsxs)("div",{className:"swipable-card",style:{backgroundImage:"linear-gradient(to top, rgba(85, 105, 133, 0.9), transparent), url('".concat(e.image_url,")")},children:[Object(p.jsx)("div",{className:"badge",children:e.score}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:e.title}),Object(p.jsx)("span",{className:"badge sqr",children:e.rated}),"\xa0 |\xa0",Object(p.jsxs)("span",{children:[" ",e.type]}),"\xa0 |\xa0",Object(p.jsxs)("span",{children:[null===e||void 0===e||null===(t=e.start_date)||void 0===t?void 0:t.slice(0,4)," "]}),Object(p.jsx)("p",{children:e.synopsis})]})]})})}))})})},J=function(){return Object(p.jsx)("div",{className:"container",children:Object(p.jsx)(z,{})})},A=j.a.create(),D=function(){var e,t=Object(c.useState)(""),n=Object(g.a)(t,2),a=n[0],r=n[1],s=Object(P.a)("animeData",function(){var e=Object(F.a)(q.a.mark((function e(){var t,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={params:{q:a}},e.next=3,A.get("https://api.jikan.moe/v3/search/anime",t).then((function(e){return e.data})).catch(console.log);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),i=s.data,o=s.refetch;return Object(c.useEffect)((function(){a.length>=3&&o()}),[a]),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("input",{type:"search",name:"search",placeholder:"Search for Anime, Manga, Comics and more...",value:a,style:{width:"100%"},onChange:function(e){return r(e.target.value)}}),Object(p.jsx)("div",{id:"search-results",children:null===i||void 0===i||null===(e=i.results)||void 0===e?void 0:e.map((function(e){var t;return Object(p.jsxs)("div",{className:"search-card",style:{backgroundImage:"linear-gradient(to top, rgba(85, 105, 133, 0.9), transparent), url('".concat(e.image_url,")")},children:[Object(p.jsx)("div",{className:"badge",children:e.score}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:e.title}),Object(p.jsx)("span",{className:"badge sqr",children:e.rated}),"\xa0 |\xa0",Object(p.jsxs)("span",{children:[" ",e.type]}),"\xa0 |\xa0",Object(p.jsxs)("span",{children:[null===e||void 0===e||null===(t=e.start_date)||void 0===t?void 0:t.slice(0,4)," "]})]})]})}))})]})},G=n(29),M=j.a.create(),U=function(){var e=Object(c.useContext)(k).user,t=Object(c.useState)([]),n=Object(g.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)([]),i=Object(g.a)(s,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){j.a.get("/watch_later/all").then((function(e){e.data.data.forEach((function(e){M.get("https://api.jikan.moe/v3/anime/".concat(e.mal_id)).then((function(e){return r([].concat(Object(G.a)(a),[e.data]))}))}))})).catch(console.error),j.a.get("/completed/all").then((function(e){e.data.data.forEach((function(e){M.get("https://api.jikan.moe/v3/anime/".concat(e.mal_id)).then((function(e){return l([].concat(Object(G.a)(o),[e.data]))}))}))})).catch(console.error)}),[]),Object(p.jsxs)("div",{className:"contianer",id:"profile-section",children:[Object(p.jsx)("img",{src:e.photo,alt:""}),Object(p.jsxs)("h2",{children:[e.firstname," ",e.lastname]}),Object(p.jsxs)("ul",{id:"anime-list",children:[Object(p.jsx)("h4",{children:"Watchlist"}),a.map((function(e){return Object(p.jsx)("li",{children:Object(p.jsx)("h5",{children:e.title})},e.id)}))]}),Object(p.jsx)("hr",{}),Object(p.jsxs)("ul",{id:"anime-list",children:[Object(p.jsx)("h4",{children:"Watched"}),o.map((function(e){return Object(p.jsx)("li",{style:{borderColor:"var(--grey)"},children:Object(p.jsx)("h5",{children:e.title})},e.id)}))]})]})};n(80);j.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="bearer ".concat(t)),e.headers["Content-Type"]="application/json",e}),(function(e){return Promise.reject(e)})),j.a.defaults.baseURL="https://defaultv-qguqqofcsa-el.a.run.app";var B=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(m,{}),Object(p.jsxs)(d.d,{children:[Object(p.jsx)(d.b,{path:"/login",component:_}),Object(p.jsx)(S,{path:"/",exact:!0,component:J}),Object(p.jsx)(S,{path:"/search",component:D}),Object(p.jsx)(S,{path:"/profile",component:U})]})]})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,90)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},R=(n(81),new i.a);s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(N,{children:Object(p.jsx)(o.a,{client:R,children:Object(p.jsx)(l.a,{children:Object(p.jsx)(B,{})})})})}),document.getElementById("root")),W()}},[[82,1,2]]]);
//# sourceMappingURL=main.def8fa09.chunk.js.map